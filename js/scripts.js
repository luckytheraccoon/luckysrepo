"use strict";function LogoHeader(){return React.createElement("img",{src:"http://loosepixel.com/wp-content/uploads/2013/02/copy-flat_lplogo.png"})}function Button(e){return React.createElement("button",{className:e.classes,onClick:e.onClick},e.label)}function SubmitButton(e){var t;return null==e.value&&(t="Submit"),React.createElement("input",{type:"submit",value:t})}function TextInput(e){return null==e.name&&(e.name=e.id),React.createElement("input",{id:e.id,name:e.name,type:"text",value:e.value,onChange:e.onChange})}function PasswordInput(e){return null==e.name&&(e.name=e.id),React.createElement("input",{id:e.id,name:e.name,type:"password",value:e.value,onChange:e.onChange})}function Label(e){return React.createElement("label",{htmlFor:e.for},e.text)}function DivContainer(e){var t="";return void 0!==e.classes&&(t=e.classes+" "),t+="div-container",React.createElement("div",{className:t},e.children)}function MainContainer(e){return React.createElement("div",{className:"div-main"},e.children)}function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Warning(e){return e.warn?_react2.default.createElement("span",null,"This is a warning!"):null}function HotTopics(){return _react2.default.createElement(DivContainer,{classes:"div-hot-topics"},_react2.default.createElement("div",null,"wegwegweg"),_react2.default.createElement("div",null,"fffff"))}function HowWeWork(){return _react2.default.createElement(DivContainer,{classes:"div-how-we-work"},_react2.default.createElement("div",null,"wegwegweg"),_react2.default.createElement("div",null,"fffff"))}function Featured(){return _react2.default.createElement(DivContainer,{classes:"div-featured"},_react2.default.createElement("div",null,"wegwegweg"),_react2.default.createElement("div",null,"fffff"))}function Footer(){return _react2.default.createElement(DivContainer,{classes:"div-footer"},_react2.default.createElement("div",null,"wegwegweg"),_react2.default.createElement("div",null,"fffff"))}function Header(){return _react2.default.createElement(DivContainer,{classes:"div-header"},_react2.default.createElement("div",null,_react2.default.createElement(LogoHeader,null)),_react2.default.createElement("div",null,_react2.default.createElement(AuthMenu,null)))}function RegisterMenu(e){return _react2.default.createElement("div",{className:"div-register-menu"},_react2.default.createElement(RegisterForm,{fields:e.registerForm.fields,onSubmit:e.registerForm.onSubmit,onInputChange:e.registerForm.onInputChange}))}function LoginMenu(e){return _react2.default.createElement("div",{className:"div-login-menu"},_react2.default.createElement(LoginForm,{fields:e.loginForm.fields,onSubmit:e.loginForm.onSubmit,onCancel:e.loginForm.onCancel,onInputChange:e.loginForm.onInputChange}))}function GuestUserMenu(e){return _react2.default.createElement("div",{className:"div-guest-menu"},_react2.default.createElement(Button,{label:"Sign Up",onClick:e.buttonActions.signUp}),_react2.default.createElement(Button,{label:"Sign In",onClick:e.buttonActions.signIn}))}function LoggedUserMenu(e){return _react2.default.createElement("div",{className:"div-user-menu"},_react2.default.createElement("span",null,"Hello, ",e.username,"!"),_react2.default.createElement(Button,{label:"Sign Out",onClick:e.onClickLogout}))}function Modal(e){return _react2.default.createElement("div",{className:"div-modal",onClick:e.closeMethod},_react2.default.createElement("div",{className:"container bg-white box-md"},_react2.default.createElement("div",{className:"title"},e.title),_react2.default.createElement("div",{className:"message"},e.message),e.children,_react2.default.createElement("button",{onClick:e.closeMethod,className:"close-modal"},"Close")))}function RegisterForm(e){return _react2.default.createElement("div",null,_react2.default.createElement("form",{id:"registerForm",onSubmit:e.onSubmit},_react2.default.createElement(Label,{for:"registerForm_email",text:"Email:"}),_react2.default.createElement(TextInput,{id:"registerForm_email",name:"email",value:e.fields.email,onChange:e.onInputChange}),_react2.default.createElement(Label,{for:"registerForm_password",text:"Password:"}),_react2.default.createElement(PasswordInput,{id:"registerForm_password",name:"password",value:e.fields.password,onChange:e.onInputChange}),_react2.default.createElement(SubmitButton,null)))}function LoginForm(e){var t=null;return null!=e.onCancel&&(t=_react2.default.createElement(Button,{key:"hideLoginForm",label:"Cancel",onClick:e.onCancel})),_react2.default.createElement("div",null,_react2.default.createElement("form",{id:"loginForm",onSubmit:e.onSubmit},_react2.default.createElement(Label,{for:"loginForm_email",text:"Email:"}),_react2.default.createElement(TextInput,{id:"loginForm_email",name:"email",value:e.fields.email,onChange:e.onInputChange}),_react2.default.createElement(Label,{for:"loginForm_password",text:"Password:"}),_react2.default.createElement(PasswordInput,{id:"loginForm_password",name:"password",value:e.fields.password,onChange:e.onInputChange}),_react2.default.createElement(SubmitButton,null)),t)}function ajaxGet(e,t,n){null!=t&&t(),fetch("http://myproject.app"+e,{credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json charset=UTF-8","X-CSRF-TOKEN":document.querySelector("meta[name='_token']").content},method:"GET"}).then(function(e){return e.json()}).then(function(e){n(e)})}function ajaxPost(e,t,n,a){null!=n&&n();var r=document.querySelector("meta[name='_token']").content;null===t?t={_token:r}:t._token=r,fetch("http://myproject.app"+e,{credentials:"same-origin",headers:{"X-Requested-With":"XMLHttpRequest","Content-type":"application/json charset=UTF-8","X-CSRF-TOKEN":document.querySelector("meta[name='_token']").content},method:"POST",body:JSON.stringify(t)}).then(function(e){return e.json()}).then(function(e){a(e)}.bind(this))}var _createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),_react=require("react"),_react2=_interopRequireDefault(_react),_reactDom=require("react-dom"),_reactDom2=_interopRequireDefault(_reactDom),_reactAddonsCssTransitionGroup=require("react-addons-css-transition-group"),_reactAddonsCssTransitionGroup2=_interopRequireDefault(_reactAddonsCssTransitionGroup),GrowBar=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={barSize:0},n.growBar=n.growBar.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"growBar",value:function(){this.state.barSize<5&&(this.setState({barSize:this.state.barSize+1}),barGrow())}},{key:"render",value:function(){var e,t;return this.state.barSize>0?(e=_react2.default.createElement("div",{className:"progressBar progressBar-animate-"+this.state.barSize},this.state.barSize),t=_react2.default.createElement("div",{id:"progressEffectsStarWrap",className:"progressEffectsStarWrap progressEffectsStarWrap-animate-"+this.state.barSize})):(e=_react2.default.createElement("div",{className:"progressBar"},this.state.barSize),t=_react2.default.createElement("div",{id:"progressEffectsStarWrap",className:"progressEffectsStarWrap"})),_react2.default.createElement(DivContainer,{classes:"div-user-progress"},_react2.default.createElement("div",{style:{position:"relative"}},_react2.default.createElement(Button,{label:"Grow Bar!",onClick:this.growBar}),_react2.default.createElement("div",{className:"progressBarWrap"},e,t)))}}]),t}(_react2.default.Component),AuthMenu=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isLoggedIn:!1,loggedInAs:null,showLoginForm:!1,showRegisterForm:!1,loginForm_email:"",loginForm_password:"",registerForm_email:"",registerForm_password:"",showModal:!1,modalDismissed:!1,checkAuthDone:!1},n.handleLogoutClick=n.handleLogoutClick.bind(n),n.handleShowLoginFormClick=n.handleShowLoginFormClick.bind(n),n.handleHideLoginFormClick=n.handleHideLoginFormClick.bind(n),n.handleShowRegisterFormClick=n.handleShowRegisterFormClick.bind(n),n.handleHideRegisterFormClick=n.handleHideRegisterFormClick.bind(n),n.handleChange=n.handleChange.bind(n),n.handleLoginFormSubmit=n.handleLoginFormSubmit.bind(n),n.handleRegisterFormSubmit=n.handleRegisterFormSubmit.bind(n),n.handleLoginError=n.handleLoginError.bind(n),n.handleOpenModal=n.handleOpenModal.bind(n),n.handleCloseModal=n.handleCloseModal.bind(n),n}return _inherits(t,e),_createClass(t,[{key:"componentDidMount",value:function(){var e=this;ajaxGet("/checkAuth",null,function(t){e.setState({isLoggedIn:t.loggedIn,loggedInAs:t.loggedInAs,checkAuthDone:!0})})}},{key:"handleShowRegisterFormClick",value:function(){this.setState({showRegisterForm:!0}),this.handleOpenModal()}},{key:"handleHideRegisterFormClick",value:function(e){this.handleCloseModal(e,"register")}},{key:"handleShowLoginFormClick",value:function(){this.setState({showLoginForm:!0})}},{key:"handleHideLoginFormClick",value:function(){this.setState({showLoginForm:!1})}},{key:"handleLogoutClick",value:function(){var e=this;ajaxPost("/logout",null,function(){e.setState({checkAuthDone:!1})},function(t){e.setState({isLoggedIn:t.loggedIn,checkAuthDone:!0})})}},{key:"handleChange",value:function(e){var t=e.target,n=t.value,a=t.id;this.setState(_defineProperty({},a,n))}},{key:"handleOpenModal",value:function(){this.setState({showModal:!0,modalDismissed:!1})}},{key:"handleCloseModal",value:function(e,t){var n=e.target;["close-modal","div-modal"].includes(n.className)&&(this.setState({showModal:!1,modalDismissed:!0}),"register"===t&&this.setState({showRegisterForm:!1}))}},{key:"handleLoginError",value:function(){this.handleOpenModal()}},{key:"handleRegisterFormSubmit",value:function(e){var t=this;e.preventDefault(),ajaxPost("/register",$("#registerForm").serializeObject(),function(){t.setState({checkAuthDone:!1})},function(e){alert("hey!")})}},{key:"handleLoginFormSubmit",value:function(e){var t=this;e.preventDefault(),ajaxPost("/login",$("#loginForm").serializeObject(),function(){t.setState({checkAuthDone:!1})},function(e){if(t.setState({isLoggedIn:e.loggedIn,loggedInAs:e.loggedInAs}),!0===t.state.isLoggedIn)return t.setState({checkAuthDone:!0}),t.state.showModal?void t.setState({showModal:!1,modalDismissed:!0}):void t.handleHideLoginFormClick();t.handleLoginError()})}},{key:"render",value:function(){var e,t,n,a=this.state.showModal,r=this.state.modalDismissed,o=this.state.isLoggedIn,l=this.state.loggedInAs,i=this.state.showLoginForm,s=this.state.showRegisterForm,u=this.state.checkAuthDone,c=null;return a&&(e=s?_react2.default.createElement(Modal,{title:"Sign Up",message:"Use the form below to sign up.",closeMethod:this.handleHideRegisterFormClick},_react2.default.createElement(RegisterMenu,{registerForm:{fields:{email:this.state.registerForm_email,password:this.state.registerForm_password},onSubmit:this.handleRegisterFormSubmit,onInputChange:this.handleChange}})):_react2.default.createElement(Modal,{title:"Oops...!",message:"Incorrect username or password.",closeMethod:this.handleCloseModal},_react2.default.createElement(LoginMenu,{loginForm:{fields:{email:this.state.loginForm_email,password:this.state.loginForm_password},onSubmit:this.handleLoginFormSubmit,onInputChange:this.handleChange}}))),(u||r)&&(o?t=_react2.default.createElement(LoggedUserMenu,{onClickLogout:this.handleLogoutClick,username:l}):i?n=_react2.default.createElement(LoginMenu,{loginForm:{fields:{email:this.state.loginForm_email,password:this.state.loginForm_password},onSubmit:this.handleLoginFormSubmit,onCancel:this.handleHideLoginFormClick,onInputChange:this.handleChange}}):c=_react2.default.createElement(GuestUserMenu,{buttonActions:{signUp:this.handleShowRegisterFormClick,signIn:this.handleShowLoginFormClick}})),_react2.default.createElement("div",null,_react2.default.createElement(_reactAddonsCssTransitionGroup2.default,{transitionName:"div-user-menu",transitionEnterTimeout:700,transitionLeaveTimeout:700},t),_react2.default.createElement(_reactAddonsCssTransitionGroup2.default,{transitionName:"div-login-menu",transitionEnterTimeout:700,transitionLeaveTimeout:700},n),_react2.default.createElement(_reactAddonsCssTransitionGroup2.default,{transitionName:"div-guest-menu",transitionEnterTimeout:700,transitionLeaveTimeout:700},c),_react2.default.createElement(_reactAddonsCssTransitionGroup2.default,{transitionName:"div-modal-a",transitionEnterTimeout:200,transitionLeaveTimeout:200},e))}}]),t}(_react2.default.PureComponent),WelcomeMat=function(e){function t(e){_classCallCheck(this,t);var n=_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleWarningButton=n.handleWarningButton.bind(n),n.state={showWarning:!1},n}return _inherits(t,e),_createClass(t,[{key:"handleWarningButton",value:function(){this.setState(function(e){return{showWarning:!e.showWarning}})}},{key:"render",value:function(){return _react2.default.createElement(DivContainer,{classes:"div-welcome-mat"},_react2.default.createElement(Button,{label:"Show Warning",onClick:this.handleWarningButton}),_react2.default.createElement(Warning,{warn:this.state.showWarning}))}}]),t}(_react2.default.Component),MainApp=function(e){function t(){return _classCallCheck(this,t),_possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _inherits(t,e),_createClass(t,[{key:"render",value:function(){return _react2.default.createElement(MainContainer,null,_react2.default.createElement(Header,null),_react2.default.createElement(GrowBar,null),_react2.default.createElement(WelcomeMat,null),_react2.default.createElement(HotTopics,null),_react2.default.createElement(HowWeWork,null),_react2.default.createElement(Featured,null),_react2.default.createElement(Footer,null))}}]),t}(_react2.default.Component);_reactDom2.default.render(_react2.default.createElement(MainApp,null),document.getElementById("root")),$.fn.serializeObject=function(){var e={},t=this.serializeArray();return $.each(t,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},console.log("yo");